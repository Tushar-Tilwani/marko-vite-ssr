{
  "version": 3,
  "sources": ["../../warp10/src/constants.js", "../../warp10/constants.js", "../../marko/src/runtime/helpers/serialize-noop.js", "../../marko/src/runtime/components/ComponentDef.js"],
  "sourcesContent": ["var win = typeof window !== \"undefined\" ? window : global;\nexports.NOOP = win.$W10NOOP = win.$W10NOOP || function () {};", "module.exports = require(\"./src/constants\");", "var w10NOOP = require(\"warp10/constants\").NOOP;\nexports.___noop = w10NOOP;\nexports.___toJSON = function () {\n  return w10NOOP;\n};\n", "\"use strict\";\n// eslint-disable-next-line no-constant-binary-expression\nvar complain = \"MARKO_DEBUG\" && require(\"complain\");\nvar extend = require(\"raptor-util/extend\");\nvar componentUtil = require(\"@internal/components-util\");\nvar w10NOOP = require(\"../helpers/serialize-noop\").___noop;\nvar attachBubblingEvent = componentUtil.___attachBubblingEvent;\nvar addDelegatedEventHandler =\n  require(\"./event-delegation\").___addDelegatedEventHandler;\nvar KeySequence = require(\"./KeySequence\");\nvar EMPTY_OBJECT = {};\n\nvar FLAG_WILL_RERENDER_IN_BROWSER = 1;\nvar FLAG_HAS_RENDER_BODY = 2;\nvar FLAG_IS_LEGACY = 4;\nvar FLAG_OLD_HYDRATE_NO_CREATE = 8;\n\n/**\n * A ComponentDef is used to hold the metadata collected at runtime for\n * a single component and this information is used to instantiate the component\n * later (after the rendered HTML has been added to the DOM)\n */\nfunction ComponentDef(component, componentId, componentsContext) {\n  this.___componentsContext = componentsContext; // The AsyncWriter that this component is associated with\n  this.___component = component;\n  this.id = componentId;\n\n  this.___domEvents = undefined; // An array of DOM events that need to be added (in sets of three)\n\n  this.___isExisting = false;\n\n  this.___renderBoundary = false;\n  this.___flags = 0;\n\n  this.___nextIdIndex = 0; // The unique integer to use for the next scoped ID\n  this.___keySequence = null;\n}\n\nComponentDef.prototype = {\n  ___nextKey: function (key) {\n    return (\n      this.___keySequence || (this.___keySequence = new KeySequence())\n    ).___nextKey(key);\n  },\n\n  /**\n   * This helper method generates a unique and fully qualified DOM element ID\n   * that is unique within the scope of the current component.\n   */\n  elId: function (nestedId) {\n    var id = this.id;\n\n    if (nestedId == null) {\n      return id;\n    } else {\n      if (typeof nestedId !== \"string\") {\n        // eslint-disable-next-line no-constant-condition\n        if (\"MARKO_DEBUG\") {\n          complain(\"Using non strings as keys is deprecated.\");\n        }\n\n        nestedId = String(nestedId);\n      }\n\n      if (nestedId.indexOf(\"#\") === 0) {\n        id = \"#\" + id;\n        nestedId = nestedId.substring(1);\n      }\n\n      return id + \"-\" + nestedId;\n    }\n  },\n  /**\n   * Returns the next auto generated unique ID for a nested DOM element or nested DOM component\n   */\n  ___nextComponentId: function () {\n    return this.id + \"-c\" + this.___nextIdIndex++;\n  },\n\n  d: function (eventName, handlerMethodName, isOnce, extraArgs) {\n    addDelegatedEventHandler(eventName);\n    return attachBubblingEvent(this, handlerMethodName, isOnce, extraArgs);\n  },\n\n  get ___type() {\n    return this.___component.___type;\n  },\n};\n\nComponentDef.prototype.nk = ComponentDef.prototype.___nextKey;\n\nComponentDef.___deserialize = function (o, types, global, registry) {\n  var id = o[0];\n  var typeName = types[o[1]];\n  var input = o[2] || null;\n  var extra = o[3] || EMPTY_OBJECT;\n\n  var state = extra.s;\n  var componentProps = extra.w || EMPTY_OBJECT;\n  var flags = extra.f;\n  var isLegacy = flags & FLAG_IS_LEGACY;\n  var renderBody = flags & FLAG_HAS_RENDER_BODY ? w10NOOP : extra.r;\n\n  var component =\n    typeName /* legacy */ &&\n    registry.___createComponent(typeName, id, isLegacy);\n\n  // Prevent newly created component from being queued for update since we area\n  // just building it from the server info\n  component.___updateQueued = true;\n  component.___global = global;\n\n  if (isLegacy) {\n    component.widgetConfig = componentProps;\n    component.___widgetBody = renderBody;\n  } else if (renderBody) {\n    (input || (input = {})).renderBody = renderBody;\n  }\n\n  if (\n    !isLegacy &&\n    flags & FLAG_WILL_RERENDER_IN_BROWSER &&\n    !(flags & FLAG_OLD_HYDRATE_NO_CREATE)\n  ) {\n    if (component.onCreate) {\n      component.onCreate(input, { global: global });\n    }\n    if (component.onInput) {\n      input = component.onInput(input, { global: global }) || input;\n    }\n  } else {\n    if (state) {\n      var undefinedPropNames = extra.u;\n      if (undefinedPropNames) {\n        undefinedPropNames.forEach(function (undefinedPropName) {\n          state[undefinedPropName] = undefined;\n        });\n      }\n      // We go through the setter here so that we convert the state object\n      // to an instance of `State`\n      component.state = state;\n    }\n\n    if (!isLegacy && componentProps) {\n      extend(component, componentProps);\n    }\n  }\n\n  component.___input = input;\n\n  if (extra.b) {\n    component.___bubblingDomEvents = extra.b;\n  }\n\n  var scope = extra.p;\n  var customEvents = extra.e;\n  if (customEvents) {\n    component.___setCustomEvents(customEvents, scope);\n  }\n\n  return {\n    id: id,\n    ___component: component,\n    ___domEvents: extra.d,\n    ___flags: extra.f || 0,\n  };\n};\n\nmodule.exports = ComponentDef;\n"],
  "mappings": "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",
  "names": ["require_constants", "global"]
}
