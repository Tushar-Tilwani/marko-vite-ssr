{
  "version": 3,
  "sources": ["../../marko/src/runtime/components/attach-detach.js"],
  "sourcesContent": ["var eventDelegation = require(\"./event-delegation\");\nvar delegateEvent = eventDelegation.___delegateEvent;\nvar getEventFromEl = eventDelegation.___getEventFromEl;\n\n// var componentsUtil = require('@internal/components-util');\n// var destroyNodeRecursive = componentsUtil.___destroyNodeRecursive;\n// var destroyComponentForNode = componentsUtil.___destroyComponentForNode;\n\nfunction handleNodeAttach(node, componentsContext) {\n  if (node.nodeType === 1) {\n    var eventName = \"onattach\";\n    var target = getEventFromEl(node, eventName);\n    if (target) {\n      var out = componentsContext.___out;\n      var data = out.data;\n\n      var attachTargets = data.___attachTargets;\n      if (!attachTargets) {\n        attachTargets = data.___attachTargets = [];\n        out.on(\"___componentsInitialized\", function () {\n          for (var i = 0; i < attachTargets.length; i += 2) {\n            var node = attachTargets[i];\n            var target = attachTargets[i + 1];\n            delegateEvent(node, eventName, target, {});\n          }\n        });\n      }\n\n      attachTargets.push(node);\n      attachTargets.push(target);\n    }\n  }\n}\n\nfunction handleNodeDetach(node) {\n  if (node.nodeType === 1) {\n    var eventName = \"ondetach\";\n    var target = getEventFromEl(node, eventName);\n    if (target) {\n      var allowDetach;\n\n      delegateEvent(node, eventName, target, {\n        preventDefault: function () {\n          allowDetach = false;\n        },\n        detach: function () {\n          var parentNode = node.parentNode;\n          if (parentNode) {\n            parentNode.removeChild(node);\n          }\n        },\n      });\n\n      return allowDetach;\n    }\n  }\n}\n\neventDelegation.___handleNodeAttach = handleNodeAttach;\neventDelegation.___handleNodeDetach = handleNodeDetach;\n"],
  "mappings": ";;;;;;;AAAA,IAAI,kBAAkB;AACtB,IAAI,gBAAgB,gBAAgB;AACpC,IAAI,iBAAiB,gBAAgB;AAMrC,SAAS,iBAAiB,MAAM,mBAAmB;AACjD,MAAI,KAAK,aAAa,GAAG;AACvB,QAAI,YAAY;AAChB,QAAI,SAAS,eAAe,MAAM,SAAS;AAC3C,QAAI,QAAQ;AACV,UAAI,MAAM,kBAAkB;AAC5B,UAAI,OAAO,IAAI;AAEf,UAAI,gBAAgB,KAAK;AACzB,UAAI,CAAC,eAAe;AAClB,wBAAgB,KAAK,mBAAmB,CAAC;AACzC,YAAI,GAAG,4BAA4B,WAAY;AAC7C,mBAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,KAAK,GAAG;AAChD,gBAAIA,QAAO,cAAc,CAAC;AAC1B,gBAAIC,UAAS,cAAc,IAAI,CAAC;AAChC,0BAAcD,OAAM,WAAWC,SAAQ,CAAC,CAAC;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAEA,oBAAc,KAAK,IAAI;AACvB,oBAAc,KAAK,MAAM;AAAA,IAC3B;AAAA,EACF;AACF;AAEA,SAAS,iBAAiB,MAAM;AAC9B,MAAI,KAAK,aAAa,GAAG;AACvB,QAAI,YAAY;AAChB,QAAI,SAAS,eAAe,MAAM,SAAS;AAC3C,QAAI,QAAQ;AACV,UAAI;AAEJ,oBAAc,MAAM,WAAW,QAAQ;AAAA,QACrC,gBAAgB,WAAY;AAC1B,wBAAc;AAAA,QAChB;AAAA,QACA,QAAQ,WAAY;AAClB,cAAI,aAAa,KAAK;AACtB,cAAI,YAAY;AACd,uBAAW,YAAY,IAAI;AAAA,UAC7B;AAAA,QACF;AAAA,MACF,CAAC;AAED,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,gBAAgB,sBAAsB;AACtC,gBAAgB,sBAAsB;",
  "names": ["node", "target"]
}
