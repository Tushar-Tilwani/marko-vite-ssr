{
  "version": 3,
  "sources": ["../../marko/src/runtime/components/dom-data.js", "../../marko/src/node_modules/@internal/components-util/index-browser.js"],
  "sourcesContent": ["module.exports = {\n  ___vPropsByDOMNode: new WeakMap(),\n  ___vElementByDOMNode: new WeakMap(),\n  ___componentByDOMNode: new WeakMap(),\n  ___detachedByDOMNode: new WeakMap(),\n  ___keyByDOMNode: new WeakMap(),\n  ___ssrKeyedElementsByComponentId: {},\n};\n", "var domData = require(\"../../../runtime/components/dom-data\");\nvar componentsByDOMNode = domData.___componentByDOMNode;\nvar keysByDOMNode = domData.___keyByDOMNode;\nvar vElementsByDOMNode = domData.___vElementByDOMNode;\nvar vPropsByDOMNode = domData.___vPropsByDOMNode;\nvar markoUID = window.$MUID || (window.$MUID = { i: 0 });\nvar runtimeId = markoUID.i++;\n\nvar componentLookup = {};\n\nvar EMPTY_OBJECT = {};\n\nfunction getComponentForEl(el, host) {\n  var node =\n    typeof el == \"string\"\n      ? ((host ? host.ownerDocument : host) || document).getElementById(el)\n      : el;\n  var component;\n  var vElement;\n\n  while (node) {\n    if (node.fragment) {\n      if (node.fragment.endNode === node) {\n        node = node.fragment.startNode;\n      } else {\n        node = node.fragment;\n        component = componentsByDOMNode.get(node);\n      }\n    } else if ((vElement = vElementsByDOMNode.get(node))) {\n      component = vElement.___ownerComponent;\n    }\n\n    if (component) {\n      return component;\n    }\n\n    node = node.previousSibling || node.parentNode;\n  }\n}\n\nfunction destroyComponentForNode(node) {\n  var componentToDestroy = componentsByDOMNode.get(node.fragment || node);\n  if (componentToDestroy) {\n    componentToDestroy.___destroyShallow();\n    delete componentLookup[componentToDestroy.id];\n  }\n}\nfunction destroyNodeRecursive(node, component) {\n  destroyComponentForNode(node);\n  if (node.nodeType === 1 || node.nodeType === 12) {\n    var key;\n\n    if (component && (key = keysByDOMNode.get(node))) {\n      if (node === component.___keyedElements[key]) {\n        if (componentsByDOMNode.get(node) && /\\[\\]$/.test(key)) {\n          delete component.___keyedElements[key][\n            componentsByDOMNode.get(node).id\n          ];\n        } else {\n          delete component.___keyedElements[key];\n        }\n      }\n    }\n\n    var curChild = node.firstChild;\n    while (curChild && curChild !== node.endNode) {\n      destroyNodeRecursive(curChild, component);\n      curChild = curChild.nextSibling;\n    }\n  }\n}\n\nfunction nextComponentId() {\n  // Each component will get an ID that is unique across all loaded\n  // marko runtimes. This allows multiple instances of marko to be\n  // loaded in the same window and they should all place nice\n  // together\n  return \"c\" + markoUID.i++;\n}\n\nfunction nextComponentIdProvider() {\n  return nextComponentId;\n}\n\nfunction attachBubblingEvent(\n  componentDef,\n  handlerMethodName,\n  isOnce,\n  extraArgs\n) {\n  if (handlerMethodName) {\n    var componentId = componentDef.id;\n    if (extraArgs) {\n      return [handlerMethodName, componentId, isOnce, extraArgs];\n    } else {\n      return [handlerMethodName, componentId, isOnce];\n    }\n  }\n}\n\nfunction getMarkoPropsFromEl(el) {\n  var vElement = vElementsByDOMNode.get(el);\n  var virtualProps;\n\n  if (vElement) {\n    virtualProps = vElement.___properties;\n  } else {\n    virtualProps = vPropsByDOMNode.get(el);\n    if (!virtualProps) {\n      virtualProps = el.getAttribute(\"data-marko\");\n      vPropsByDOMNode.set(\n        el,\n        (virtualProps = virtualProps ? JSON.parse(virtualProps) : EMPTY_OBJECT)\n      );\n    }\n  }\n\n  return virtualProps;\n}\n\nfunction normalizeComponentKey(key, parentId) {\n  if (key[0] === \"#\") {\n    key = key.replace(\"#\" + parentId + \"-\", \"\");\n  }\n  return key;\n}\n\nfunction addComponentRootToKeyedElements(\n  keyedElements,\n  key,\n  rootNode,\n  componentId\n) {\n  if (/\\[\\]$/.test(key)) {\n    var repeatedElementsForKey = (keyedElements[key] =\n      keyedElements[key] || {});\n    repeatedElementsForKey[componentId] = rootNode;\n  } else {\n    keyedElements[key] = rootNode;\n  }\n}\n\nexports.___runtimeId = runtimeId;\nexports.___componentLookup = componentLookup;\nexports.___getComponentForEl = getComponentForEl;\nexports.___destroyComponentForNode = destroyComponentForNode;\nexports.___destroyNodeRecursive = destroyNodeRecursive;\nexports.___nextComponentIdProvider = nextComponentIdProvider;\nexports.___attachBubblingEvent = attachBubblingEvent;\nexports.___getMarkoPropsFromEl = getMarkoPropsFromEl;\nexports.___addComponentRootToKeyedElements = addComponentRootToKeyedElements;\nexports.___normalizeComponentKey = normalizeComponentKey;\n"],
  "mappings": "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",
  "names": []
}
